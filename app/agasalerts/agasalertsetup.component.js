"use strict";
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = require("@angular/core");
var router_1 = require("@angular/router");
var services_1 = require("../services");
var agasalert_service_1 = require("./agasalert.service");
var app_globals_1 = require("../app.globals");
var AGASAlertSetupComponent = (function () {
    function AGASAlertSetupComponent(agasalertService, router) {
        this.agasalertService = agasalertService;
        this.router = router;
        this.limit = 0;
    }
    AGASAlertSetupComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.alerttypedd = this.alerttypedd_ElementRef.nativeElement;
        this.balancesheetcodesdd = this.balancesheetcodesdd_ElementRef.nativeElement;
        this.cashflowcodesdd = this.cashflowcodesdd_ElementRef.nativeElement;
        this.financialperformancecodesdd = this.financialperformancecodesdd_ElementRef.nativeElement;
        this.alertequestlist$ = this.agasalertService.getAlertRequestList(services_1.BackendService.email);
        this.agasalertService.getAGASAlertTypeList().subscribe(function (res) {
            _this.alertTypeList = [];
            for (var id in res) {
                var result = Object.assign({ id: id }, res[id]);
                _this.alertTypeList.push({ ValueMember: result.name, DisplayMember: result.name });
            }
            _this.alertTypeValueList = new app_globals_1.ValueList(_this.alertTypeList);
            _this.alerttypedd.items = _this.alertTypeValueList;
            _this.alerttypedd.selectedIndex = 0;
            _this.selectedalertTypeId = _this.alertTypeValueList.getValue(0);
            _this.selectedalertTypedescr = _this.alertTypeValueList.getText(0);
            ;
        });
        this.agasalertService.getBalanceSheetCodesList().subscribe(function (res) {
            _this.balancesheetcodesList = [];
            for (var id in res) {
                var result = Object.assign({ id: id }, res[id]);
                _this.balancesheetcodesList.push({ ValueMember: result.code, DisplayMember: result.description });
            }
            _this.balancesheetcodesValueList = new app_globals_1.ValueList(_this.balancesheetcodesList);
            _this.balancesheetcodesdd.items = _this.balancesheetcodesValueList;
            _this.balancesheetcodesdd.selectedIndex = 0;
            _this.selectedbalancesheetcode = _this.balancesheetcodesValueList.getValue(0);
            _this.selectedbalancesheetcodedescr = _this.balancesheetcodesValueList.getText(0);
            ;
        });
        this.agasalertService.getCashFlowStatementCodesList().subscribe(function (res) {
            _this.cashflowcodesList = [];
            for (var id in res) {
                var result = Object.assign({ id: id }, res[id]);
                _this.cashflowcodesList.push({ ValueMember: result.code, DisplayMember: result.description });
            }
            _this.cashflowcodesValueList = new app_globals_1.ValueList(_this.cashflowcodesList);
            _this.cashflowcodesdd.items = _this.cashflowcodesValueList;
            _this.cashflowcodesdd.selectedIndex = 0;
            _this.selectedcashflowcode = _this.cashflowcodesValueList.getValue(0);
            _this.selectedcashflowcodedescr = _this.cashflowcodesValueList.getText(0);
            ;
        });
        this.agasalertService.getFinancialPerformanceCodesList().subscribe(function (res) {
            _this.financialperformancecodesList = [];
            for (var id in res) {
                var result = Object.assign({ id: id }, res[id]);
                _this.financialperformancecodesList.push({ ValueMember: result.code, DisplayMember: result.description });
            }
            _this.financialperformancecodesValueList = new app_globals_1.ValueList(_this.financialperformancecodesList);
            _this.financialperformancecodesdd.items = _this.financialperformancecodesValueList;
            _this.financialperformancecodesdd.selectedIndex = 0;
            _this.selectedfinancialperformancecode = _this.financialperformancecodesValueList.getValue(0);
            _this.selectedfinancialperformancecodedescr = _this.financialperformancecodesValueList.getText(0);
            ;
        });
    };
    AGASAlertSetupComponent.prototype.ExpenditureItemLimitExceeded = function () {
        var requestinfo = { "name": this.selectedalertTypeId, "code": this.selectedfinancialperformancecode, "limit": this.limit, "requiredparam": this.selectedfinancialperformancecodedescr + " @ " + this.limit + " Limit" };
        var loginfo = { "name": this.selectedalertTypedescr, "requiredparam": this.selectedfinancialperformancecodedescr + " @ " + this.limit + " Limit" };
        this.agasalertService.createAlertRequest(requestinfo, loginfo, services_1.BackendService.email)
            .then(function (res) {
            alert("Record Saved Successfully");
        })
            .catch(function (err) {
            alert("An error occurred while creating Search Request.");
        });
    };
    AGASAlertSetupComponent.prototype.TotalExpenditureBudgetExceeded = function () {
        var requestinfo = { "name": this.selectedalertTypeId, "requiredparam": "None" };
        var loginfo = { "name": this.selectedalertTypedescr, "requiredparam": "None" };
        this.agasalertService.createAlertRequest(requestinfo, loginfo, services_1.BackendService.email)
            .then(function (res) {
            alert("Record Saved Successfully");
        })
            .catch(function (err) {
            alert("An error occurred while creating Search Request.");
        });
    };
    AGASAlertSetupComponent.prototype.cretaterequest = function () {
        console.log("Selected " + this.selectedalertTypeId);
        eval("this." + this.selectedalertTypeId + "()");
    };
    AGASAlertSetupComponent.prototype.alertTypeDDonchange = function (args) {
        this.selectedalertTypeId = this.alertTypeValueList.getValue(args.newIndex);
        this.selectedalertTypedescr = this.alertTypeValueList.getText(args.newIndex);
        ;
    };
    AGASAlertSetupComponent.prototype.cashflowcodesDDonchange = function (args) {
        this.selectedcashflowcode = this.cashflowcodesValueList.getValue(args.newIndex);
        this.selectedcashflowcodedescr = this.cashflowcodesValueList.getText(args.newIndex);
        ;
    };
    AGASAlertSetupComponent.prototype.balancesheetcodesDDonchange = function (args) {
        this.selectedbalancesheetcode = this.balancesheetcodesValueList.getValue(args.newIndex);
        this.selectedbalancesheetcodedescr = this.balancesheetcodesValueList.getText(args.newIndex);
        ;
    };
    AGASAlertSetupComponent.prototype.financialperformancecodesDDonchange = function (args) {
        this.selectedfinancialperformancecode = this.financialperformancecodesValueList.getValue(args.newIndex);
        this.selectedfinancialperformancecodedescr = this.financialperformancecodesValueList.getText(args.newIndex);
        ;
    };
    AGASAlertSetupComponent.prototype.ddopen = function () {
    };
    AGASAlertSetupComponent.prototype.gotoback = function () {
        this.router.navigate(["/finagg-search"]);
    };
    AGASAlertSetupComponent.prototype.viewDetail = function (selecteditem) {
        var navigationExtras = {
            queryParams: {
                "name": selecteditem.name,
                "requiredparam": selecteditem.requiredparam,
                "logtime": selecteditem.logtime,
                "requestid": selecteditem.requestid
            }
        };
        this.router.navigate(["agasalerthtml-view"], navigationExtras);
    };
    return AGASAlertSetupComponent;
}());
__decorate([
    core_1.ViewChild("alerttypedd"),
    __metadata("design:type", core_1.ElementRef)
], AGASAlertSetupComponent.prototype, "alerttypedd_ElementRef", void 0);
__decorate([
    core_1.ViewChild("balancesheetcodesdd"),
    __metadata("design:type", core_1.ElementRef)
], AGASAlertSetupComponent.prototype, "balancesheetcodesdd_ElementRef", void 0);
__decorate([
    core_1.ViewChild("cashflowcodesdd"),
    __metadata("design:type", core_1.ElementRef)
], AGASAlertSetupComponent.prototype, "cashflowcodesdd_ElementRef", void 0);
__decorate([
    core_1.ViewChild("financialperformancecodesdd"),
    __metadata("design:type", core_1.ElementRef)
], AGASAlertSetupComponent.prototype, "financialperformancecodesdd_ElementRef", void 0);
AGASAlertSetupComponent = __decorate([
    core_1.Component({
        moduleId: module.id,
        selector: "finaggsearchdisplay",
        templateUrl: "agasalertsetup.html"
    }),
    __metadata("design:paramtypes", [agasalert_service_1.AGASAlertService,
        router_1.Router])
], AGASAlertSetupComponent);
exports.AGASAlertSetupComponent = AGASAlertSetupComponent;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYWdhc2FsZXJ0c2V0dXAuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiYWdhc2FsZXJ0c2V0dXAuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQUEsc0NBQWlGO0FBRWpGLDBDQUEyRTtBQUMzRSx3Q0FBNkM7QUFDN0MseURBQXVEO0FBQ3ZELDhDQUEyQztBQVEzQyxJQUFhLHVCQUF1QjtJQWdDaEMsaUNBQW9CLGdCQUFrQyxFQUMxQyxNQUFjO1FBRE4scUJBQWdCLEdBQWhCLGdCQUFnQixDQUFrQjtRQUMxQyxXQUFNLEdBQU4sTUFBTSxDQUFRO1FBRXRCLElBQUksQ0FBQyxLQUFLLEdBQUcsQ0FBQyxDQUFDO0lBQ25CLENBQUM7SUFDRCwwQ0FBUSxHQUFSO1FBQUEsaUJBcUVDO1FBcEVHLElBQUksQ0FBQyxXQUFXLEdBQUcsSUFBSSxDQUFDLHNCQUFzQixDQUFDLGFBQWEsQ0FBQztRQUM3RCxJQUFJLENBQUMsbUJBQW1CLEdBQUcsSUFBSSxDQUFDLDhCQUE4QixDQUFDLGFBQWEsQ0FBQztRQUM3RSxJQUFJLENBQUMsZUFBZSxHQUFHLElBQUksQ0FBQywwQkFBMEIsQ0FBQyxhQUFhLENBQUM7UUFDckUsSUFBSSxDQUFDLDJCQUEyQixHQUFHLElBQUksQ0FBQyxzQ0FBc0MsQ0FBQyxhQUFhLENBQUM7UUFDN0YsSUFBSSxDQUFDLGdCQUFnQixHQUFRLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxtQkFBbUIsQ0FBQyx5QkFBYyxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBTTdGLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxvQkFBb0IsRUFBRSxDQUFDLFNBQVMsQ0FBQyxVQUFBLEdBQUc7WUFDdEQsS0FBSSxDQUFDLGFBQWEsR0FBRyxFQUFFLENBQUM7WUFFeEIsR0FBRyxDQUFDLENBQUMsSUFBSSxFQUFFLElBQUksR0FBRyxDQUFDLENBQUMsQ0FBQztnQkFDakIsSUFBSSxNQUFNLEdBQVMsTUFBTyxDQUFD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NkIsaUJBQVU7MkVBQUM7QUFPM0I7SUFBekMsZ0JBQVMsQ0FBQyw2QkFBNkIsQ0FBQzs4QkFBeUMsaUJBQVU7dUZBQUM7QUF4QnBGLHVCQUF1QjtJQUxuQyxnQkFBUyxDQUFDO1FBQ1AsUUFBUSxFQUFFLE1BQU0sQ0FBQyxFQUFFO1FBQ25CLFFBQVEsRUFBRSxxQkFBcUI7UUFDL0IsV0FBVyxFQUFFLHFCQUFxQjtLQUNyQyxDQUFDO3FDQWlDd0Msb0NBQWdCO1FBQ2xDLGVBQU07R0FqQ2pCLHVCQUF1QixDQTRLbkM7QUE1S1ksMERBQXVCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tcG9uZW50LCBPbkluaXQsIE5nWm9uZSwgVmlld0NoaWxkLCBFbGVtZW50UmVmIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IE9ic2VydmFibGUgfSBmcm9tICdyeGpzL09ic2VydmFibGUnO1xyXG5pbXBvcnQgeyBSb3V0ZXIsIEFjdGl2YXRlZFJvdXRlLCBOYXZpZ2F0aW9uRXh0cmFzIH0gZnJvbSAnQGFuZ3VsYXIvcm91dGVyJztcclxuaW1wb3J0IHsgQmFja2VuZFNlcnZpY2UgfSBmcm9tIFwiLi4vc2VydmljZXNcIjtcclxuaW1wb3J0IHsgQUdBU0FsZXJ0U2VydmljZSB9IGZyb20gXCIuL2FnYXNhbGVydC5zZXJ2aWNlXCI7XHJcbmltcG9ydCB7IFZhbHVlTGlzdCB9IGZyb20gXCIuLi9hcHAuZ2xvYmFsc1wiO1xyXG5pbXBvcnQgeyBTZWxlY3RlZEluZGV4Q2hhbmdlZEV2ZW50RGF0YSB9IGZyb20gXCJuYXRpdmVzY3JpcHQtZHJvcC1kb3duXCI7XHJcbmltcG9ydCB7IERyb3BEb3duIH0gZnJvbSBcIm5hdGl2ZXNjcmlwdC1kcm9wLWRvd25cIjtcclxuQENvbXBvbmVudCh7XHJcbiAgICBtb2R1bGVJZDogbW9kdWxlLmlkLFxyXG4gICAgc2VsZWN0b3I6IFwiZmluYWdnc2VhcmNoZGlzcGxheVwiLFxyXG4gICAgdGVtcGxhdGVVcmw6IFwiYWdhc2FsZXJ0c2V0dXAuaHRtbFwiXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBBR0FTQWxlcnRTZXR1cENvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCB7XHJcbiAgICBwdWJsaWMgYWxlcnRUeXBlTGlzdDogYW55W107XHJcbiAgICBwdWJsaWMgYWxlcnRUeXBlVmFsdWVMaXN0OiBWYWx1ZUxpc3Q7XHJcbiAgICBAVmlld0NoaWxkKFwiYWxlcnR0eXBlZGRcIikgYWxlcnR0eXBlZGRfRWxlbWVudFJlZjogRWxlbWVudFJlZjtcclxuICAgIGFsZXJ0dHlwZWRkOiBEcm9wRG93bjtcclxuICAgIHB1YmxpYyBzZWxlY3RlZGFsZXJ0VHlwZUlkOiBzdHJpbmc7XHJcbiAgICBwdWJsaWMgc2VsZWN0ZWRhbGVydFR5cGVkZXNjcjogc3RyaW5nO1xyXG4gICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgICBwdWJsaWMgYmFsYW5jZXNoZWV0Y29kZXNMaXN0OiBhbnlbXTtcclxuICAgIHB1YmxpYyBiYWxhbmNlc2hlZXRjb2Rlc1ZhbHVlTGlzdDogVmFsdWVMaXN0O1xyXG4gICAgQFZpZXdDaGlsZChcImJhbGFuY2VzaGVldGNvZGVzZGRcIikgYmFsYW5jZXNoZWV0Y29kZXNkZF9FbGVtZW50UmVmOiBFbGVtZW50UmVmO1xyXG4gICAgYmFsYW5jZXNoZWV0Y29kZXNkZDogRHJvcERvd247XHJcbiAgICBwdWJsaWMgc2VsZWN0ZWRiYWxhbmNlc2hlZXRjb2RlOiBzdHJpbmc7XHJcbiAgICBwdWJsaWMgc2VsZWN0ZWRiYWxhbmNlc2hlZXRjb2RlZGVzY3I6IHN0cmluZztcclxuICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAgIHB1YmxpYyBjYXNoZmxvd2NvZGVzTGlzdDogYW55W107XHJcbiAgICBwdWJsaWMgY2FzaGZsb3djb2Rlc1ZhbHVlTGlzdDogVmFsdWVMaXN0O1xyXG4gICAgQFZpZXdDaGlsZChcImNhc2hmbG93Y29kZXNkZFwiKSBjYXNoZmxvd2NvZGVzZGRfRWxlbWVudFJlZjogRWxlbWVudFJlZjtcclxuICAgIGNhc2hmbG93Y29kZXNkZDogRHJvcERvd247XHJcbiAgICBwdWJsaWMgc2VsZWN0ZWRjYXNoZmxvd2NvZGU6IHN0cmluZztcclxuICAgIHB1YmxpYyBzZWxlY3RlZGNhc2hmbG93Y29kZWRlc2NyOiBzdHJpbmc7XHJcbiAgICAvLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuICAgIHB1YmxpYyBmaW5hbmNpYWxwZXJmb3JtYW5jZWNvZGVzTGlzdDogYW55W107XHJcbiAgICBwdWJsaWMgZmluYW5jaWFscGVyZm9ybWFuY2Vjb2Rlc1ZhbHVlTGlzdDogVmFsdWVMaXN0O1xyXG4gICAgQFZpZXdDaGlsZChcImZpbmFuY2lhbHBlcmZvcm1hbmNlY29kZXNkZFwiKSBmaW5hbmNpYWxwZXJmb3JtYW5jZWNvZGVzZGRfRWxlbWVudFJlZjogRWxlbWVudFJlZjtcclxuICAgIGZpbmFuY2lhbHBlcmZvcm1hbmNlY29kZXNkZDogRHJvcERvd247XHJcbiAgICBwdWJsaWMgc2VsZWN0ZWRmaW5hbmNpYWxwZXJmb3JtYW5jZWNvZGU6IHN0cmluZztcclxuICAgIHB1YmxpYyBzZWxlY3RlZGZpbmFuY2lhbHBlcmZvcm1hbmNlY29kZWRlc2NyOiBzdHJpbmc7XHJcbiAgICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gICAgbGltaXQ6IG51bWJlcjtcclxuICAgIHB1YmxpYyBhbGVydGVxdWVzdGxpc3QkOiBPYnNlcnZhYmxlPGFueT47XHJcblxyXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBhZ2FzYWxlcnRTZXJ2aWNlOiBBR0FTQWxlcnRTZXJ2aWNlLFxyXG4gICAgICAgIHByaXZhdGUgcm91dGVyOiBSb3V0ZXJcclxuICAgICkge1xyXG4gICAgICAgIHRoaXMubGltaXQgPSAwO1xyXG4gICAgfVxyXG4gICAgbmdPbkluaXQoKSB7XHJcbiAgICAgICAgdGhpcy5hbGVydHR5cGVkZCA9IHRoaXMuYWxlcnR0eXBlZGRfRWxlbWVudFJlZi5uYXRpdmVFbGVtZW50O1xyXG4gICAgICAgIHRoaXMuYmFsYW5jZXNoZWV0Y29kZXNkZCA9IHRoaXMuYmFsYW5jZXNoZWV0Y29kZXNkZF9FbGVtZW50UmVmLm5hdGl2ZUVsZW1lbnQ7XHJcbiAgICAgICAgdGhpcy5jYXNoZmxvd2NvZGVzZGQgPSB0aGlzLmNhc2hmbG93Y29kZXNkZF9FbGVtZW50UmVmLm5hdGl2ZUVsZW1lbnQ7XHJcbiAgICAgICAgdGhpcy5maW5hbmNpYWxwZXJmb3JtYW5jZWNvZGVzZGQgPSB0aGlzLmZpbmFuY2lhbHBlcmZvcm1hbmNlY29kZXNkZF9FbGVtZW50UmVmLm5hdGl2ZUVsZW1lbnQ7XHJcbiAgICAgICAgdGhpcy5hbGVydGVxdWVzdGxpc3QkID0gPGFueT50aGlzLmFnYXNhbGVydFNlcnZpY2UuZ2V0QWxlcnRSZXF1ZXN0TGlzdChCYWNrZW5kU2VydmljZS5lbWFpbCk7XHJcblxyXG5cclxuXHJcbiAgICAgICAgLy8gdGhpcy5zZWFyY2hyZXF1ZXN0bGlzdCQgPSA8YW55PnRoaXMuYWdhc2RhdGFTZXJ2aWNlLmdldEZpbmFuY2lhbEFnZ3JlZ2F0ZVF1ZXJ5UmVxdWVzdExpc3QoQmFja2VuZFNlcnZpY2UuZW1haWwpO1xyXG5cclxuICAgICAgICB0aGlzLmFnYXNhbGVydFNlcnZpY2UuZ2V0QUdBU0FsZXJ0VHlwZUxpc3QoKS5zdWJzY3JpYmUocmVzID0+IHtcclxuICAgICAgICAgICAgdGhpcy5hbGVydFR5cGVMaXN0ID0gW107XHJcblxyXG4gICAgICAgICAgICBmb3IgKGxldCBpZCBpbiByZXMpIHtcclxuICAgICAgICAgICAgICAgIGxldCByZXN1bHQgPSAoPGFueT5PYmplY3QpLmFzc2lnbih7IGlkOiBpZCB9LCByZXNbaWRdKTtcclxuICAgICAgICAgICAgICAgIC8vIHRoaXMuYWNjb3VudFR5cGVMaXN0LnB1c2goeyBpZDogcmVzdWx0LmlkLCBkZXNjcmlwdGlvbjogcmVzdWx0LmRlc2NyaXB0aW9uLCB0b1N0cmluZzogKCkgPT4geyByZXR1cm4gcmVzdWx0LmRlc2NyaXB0aW9uOyB9IH0pO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hbGVydFR5cGVMaXN0LnB1c2goeyBWYWx1ZU1lbWJlcjogcmVzdWx0Lm5hbWUsIERpc3BsYXlNZW1iZXI6IHJlc3VsdC5uYW1lIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuYWxlcnRUeXBlVmFsdWVMaXN0ID0gbmV3IFZhbHVlTGlzdCh0aGlzLmFsZXJ0VHlwZUxpc3QpO1xyXG4gICAgICAgICAgICB0aGlzLmFsZXJ0dHlwZWRkLml0ZW1zID0gdGhpcy5hbGVydFR5cGVWYWx1ZUxpc3Q7XHJcbiAgICAgICAgICAgIHRoaXMuYWxlcnR0eXBlZGQuc2VsZWN0ZWRJbmRleCA9IDA7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRhbGVydFR5cGVJZCA9IHRoaXMuYWxlcnRUeXBlVmFsdWVMaXN0LmdldFZhbHVlKDApO1xyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkYWxlcnRUeXBlZGVzY3IgPSB0aGlzLmFsZXJ0VHlwZVZhbHVlTGlzdC5nZXRUZXh0KDApOztcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmFnYXNhbGVydFNlcnZpY2UuZ2V0QmFsYW5jZVNoZWV0Q29kZXNMaXN0KCkuc3Vic2NyaWJlKHJlcyA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuYmFsYW5jZXNoZWV0Y29kZXNMaXN0ID0gW107XHJcblxyXG4gICAgICAgICAgICBmb3IgKGxldCBpZCBpbiByZXMpIHtcclxuICAgICAgICAgICAgICAgIGxldCByZXN1bHQgPSAoPGFueT5PYmplY3QpLmFzc2lnbih7IGlkOiBpZCB9LCByZXNbaWRdKTtcclxuICAgICAgICAgICAgICAgIC8vIHRoaXMuYWNjb3VudFR5cGVMaXN0LnB1c2goeyBpZDogcmVzdWx0LmlkLCBkZXNjcmlwdGlvbjogcmVzdWx0LmRlc2NyaXB0aW9uLCB0b1N0cmluZzogKCkgPT4geyByZXR1cm4gcmVzdWx0LmRlc2NyaXB0aW9uOyB9IH0pO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5iYWxhbmNlc2hlZXRjb2Rlc0xpc3QucHVzaCh7IFZhbHVlTWVtYmVyOiByZXN1bHQuY29kZSwgRGlzcGxheU1lbWJlcjogcmVzdWx0LmRlc2NyaXB0aW9uIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuYmFsYW5jZXNoZWV0Y29kZXNWYWx1ZUxpc3QgPSBuZXcgVmFsdWVMaXN0KHRoaXMuYmFsYW5jZXNoZWV0Y29kZXNMaXN0KTtcclxuICAgICAgICAgICAgdGhpcy5iYWxhbmNlc2hlZXRjb2Rlc2RkLml0ZW1zID0gdGhpcy5iYWxhbmNlc2hlZXRjb2Rlc1ZhbHVlTGlzdDtcclxuICAgICAgICAgICAgdGhpcy5iYWxhbmNlc2hlZXRjb2Rlc2RkLnNlbGVjdGVkSW5kZXggPSAwO1xyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkYmFsYW5jZXNoZWV0Y29kZSA9IHRoaXMuYmFsYW5jZXNoZWV0Y29kZXNWYWx1ZUxpc3QuZ2V0VmFsdWUoMCk7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRiYWxhbmNlc2hlZXRjb2RlZGVzY3IgPSB0aGlzLmJhbGFuY2VzaGVldGNvZGVzVmFsdWVMaXN0LmdldFRleHQoMCk7O1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuYWdhc2FsZXJ0U2VydmljZS5nZXRDYXNoRmxvd1N0YXRlbWVudENvZGVzTGlzdCgpLnN1YnNjcmliZShyZXMgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmNhc2hmbG93Y29kZXNMaXN0ID0gW107XHJcblxyXG4gICAgICAgICAgICBmb3IgKGxldCBpZCBpbiByZXMpIHtcclxuICAgICAgICAgICAgICAgIGxldCByZXN1bHQgPSAoPGFueT5PYmplY3QpLmFzc2lnbih7IGlkOiBpZCB9LCByZXNbaWRdKTtcclxuICAgICAgICAgICAgICAgIC8vIHRoaXMuYWNjb3VudFR5cGVMaXN0LnB1c2goeyBpZDogcmVzdWx0LmlkLCBkZXNjcmlwdGlvbjogcmVzdWx0LmRlc2NyaXB0aW9uLCB0b1N0cmluZzogKCkgPT4geyByZXR1cm4gcmVzdWx0LmRlc2NyaXB0aW9uOyB9IH0pO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jYXNoZmxvd2NvZGVzTGlzdC5wdXNoKHsgVmFsdWVNZW1iZXI6IHJlc3VsdC5jb2RlLCBEaXNwbGF5TWVtYmVyOiByZXN1bHQuZGVzY3JpcHRpb24gfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5jYXNoZmxvd2NvZGVzVmFsdWVMaXN0ID0gbmV3IFZhbHVlTGlzdCh0aGlzLmNhc2hmbG93Y29kZXNMaXN0KTtcclxuICAgICAgICAgICAgdGhpcy5jYXNoZmxvd2NvZGVzZGQuaXRlbXMgPSB0aGlzLmNhc2hmbG93Y29kZXNWYWx1ZUxpc3Q7XHJcbiAgICAgICAgICAgIHRoaXMuY2FzaGZsb3djb2Rlc2RkLnNlbGVjdGVkSW5kZXggPSAwO1xyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkY2FzaGZsb3djb2RlID0gdGhpcy5jYXNoZmxvd2NvZGVzVmFsdWVMaXN0LmdldFZhbHVlKDApO1xyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkY2FzaGZsb3djb2RlZGVzY3IgPSB0aGlzLmNhc2hmbG93Y29kZXNWYWx1ZUxpc3QuZ2V0VGV4dCgwKTs7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5hZ2FzYWxlcnRTZXJ2aWNlLmdldEZpbmFuY2lhbFBlcmZvcm1hbmNlQ29kZXNMaXN0KCkuc3Vic2NyaWJlKHJlcyA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuZmluYW5jaWFscGVyZm9ybWFuY2Vjb2Rlc0xpc3QgPSBbXTtcclxuXHJcbiAgICAgICAgICAgIGZvciAobGV0IGlkIGluIHJlcykge1xyXG4gICAgICAgICAgICAgICAgbGV0IHJlc3VsdCA9ICg8YW55Pk9iamVjdCkuYXNzaWduKHsgaWQ6IGlkIH0sIHJlc1tpZF0pO1xyXG4gICAgICAgICAgICAgICAgLy8gdGhpcy5hY2NvdW50VHlwZUxpc3QucHVzaCh7IGlkOiByZXN1bHQuaWQsIGRlc2NyaXB0aW9uOiByZXN1bHQuZGVzY3JpcHRpb24sIHRvU3RyaW5nOiAoKSA9PiB7IHJldHVybiByZXN1bHQuZGVzY3JpcHRpb247IH0gfSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmZpbmFuY2lhbHBlcmZvcm1hbmNlY29kZXNMaXN0LnB1c2goeyBWYWx1ZU1lbWJlcjogcmVzdWx0LmNvZGUsIERpc3BsYXlNZW1iZXI6IHJlc3VsdC5kZXNjcmlwdGlvbiB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLmZpbmFuY2lhbHBlcmZvcm1hbmNlY29kZXNWYWx1ZUxpc3QgPSBuZXcgVmFsdWVMaXN0KHRoaXMuZmluYW5jaWFscGVyZm9ybWFuY2Vjb2Rlc0xpc3QpO1xyXG4gICAgICAgICAgICB0aGlzLmZpbmFuY2lhbHBlcmZvcm1hbmNlY29kZXNkZC5pdGVtcyA9IHRoaXMuZmluYW5jaWFscGVyZm9ybWFuY2Vjb2Rlc1ZhbHVlTGlzdDtcclxuICAgICAgICAgICAgdGhpcy5maW5hbmNpYWxwZXJmb3JtYW5jZWNvZGVzZGQuc2VsZWN0ZWRJbmRleCA9IDA7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRmaW5hbmNpYWxwZXJmb3JtYW5jZWNvZGUgPSB0aGlzLmZpbmFuY2lhbHBlcmZvcm1hbmNlY29kZXNWYWx1ZUxpc3QuZ2V0VmFsdWUoMCk7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRmaW5hbmNpYWxwZXJmb3JtYW5jZWNvZGVkZXNjciA9IHRoaXMuZmluYW5jaWFscGVyZm9ybWFuY2Vjb2Rlc1ZhbHVlTGlzdC5nZXRUZXh0KDApOztcclxuICAgICAgICB9KTtcclxuXHJcblxyXG4gICAgfVxyXG5cclxuICAgIEV4cGVuZGl0dXJlSXRlbUxpbWl0RXhjZWVkZWQoKSB7XHJcbiAgICAgICAgdmFyIHJlcXVlc3RpbmZvID0geyBcIm5hbWVcIjogdGhpcy5zZWxlY3RlZGFsZXJ0VHlwZUlkLCBcImNvZGVcIjogdGhpcy5zZWxlY3RlZGZpbmFuY2lhbHBlcmZvcm1hbmNlY29kZSwgXCJsaW1pdFwiOiB0aGlzLmxpbWl0LFwicmVxdWlyZWRwYXJhbVwiOiBgJHt0aGlzLnNlbGVjdGVkZmluYW5jaWFscGVyZm9ybWFuY2Vjb2RlZGVzY3J9IEAgJHt0aGlzLmxpbWl0fSBMaW1pdGAgfTtcclxuICAgICAgICB2YXIgbG9naW5mbyA9IHsgXCJuYW1lXCI6IHRoaXMuc2VsZWN0ZWRhbGVydFR5cGVkZXNjciwgXCJyZXF1aXJlZHBhcmFtXCI6IGAke3RoaXMuc2VsZWN0ZWRmaW5hbmNpYWxwZXJmb3JtYW5jZWNvZGVkZXNjcn0gQCAke3RoaXMubGltaXR9IExpbWl0YCB9O1xyXG4gICAgICAgIHRoaXMuYWdhc2FsZXJ0U2VydmljZS5jcmVhdGVBbGVydFJlcXVlc3QocmVxdWVzdGluZm8sIGxvZ2luZm8sIEJhY2tlbmRTZXJ2aWNlLmVtYWlsKVxyXG4gICAgICAgICAgICAudGhlbihyZXMgPT4ge1xyXG4gICAgICAgICAgICAgICAgYWxlcnQoXCJSZWNvcmQgU2F2ZWQgU3VjY2Vzc2Z1bGx5XCIpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuY2F0Y2goZXJyID0+IHtcclxuICAgICAgICAgICAgICAgIGFsZXJ0KFwiQW4gZXJyb3Igb2NjdXJyZWQgd2hpbGUgY3JlYXRpbmcgU2VhcmNoIFJlcXVlc3QuXCIpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIFRvdGFsRXhwZW5kaXR1cmVCdWRnZXRFeGNlZWRlZCgpIHtcclxuICAgICAgICB2YXIgcmVxdWVzdGluZm8gPSB7IFwibmFtZVwiOiB0aGlzLnNlbGVjdGVkYWxlcnRUeXBlSWQsXCJyZXF1aXJlZHBhcmFtXCI6IFwiTm9uZVwiICB9O1xyXG4gICAgICAgIHZhciBsb2dpbmZvID0geyBcIm5hbWVcIjogdGhpcy5zZWxlY3RlZGFsZXJ0VHlwZWRlc2NyLCBcInJlcXVpcmVkcGFyYW1cIjogXCJOb25lXCIgfTtcclxuICAgICAgICB0aGlzLmFnYXNhbGVydFNlcnZpY2UuY3JlYXRlQWxlcnRSZXF1ZXN0KHJlcXVlc3RpbmZvLCBsb2dpbmZvLCBCYWNrZW5kU2VydmljZS5lbWFpbClcclxuICAgICAgICAgICAgLnRoZW4ocmVzID0+IHtcclxuICAgICAgICAgICAgICAgIGFsZXJ0KFwiUmVjb3JkIFNhdmVkIFN1Y2Nlc3NmdWxseVwiKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLmNhdGNoKGVyciA9PiB7XHJcbiAgICAgICAgICAgICAgICBhbGVydChcIkFuIGVycm9yIG9jY3VycmVkIHdoaWxlIGNyZWF0aW5nIFNlYXJjaCBSZXF1ZXN0LlwiKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBjcmV0YXRlcmVxdWVzdCgpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhcIlNlbGVjdGVkIFwiICsgdGhpcy5zZWxlY3RlZGFsZXJ0VHlwZUlkKTtcclxuICAgICAgICBldmFsKFwidGhpcy5cIiArIHRoaXMuc2VsZWN0ZWRhbGVydFR5cGVJZCArIFwiKClcIik7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgYWxlcnRUeXBlRERvbmNoYW5nZShhcmdzOiBTZWxlY3RlZEluZGV4Q2hhbmdlZEV2ZW50RGF0YSkge1xyXG5cclxuICAgICAgICB0aGlzLnNlbGVjdGVkYWxlcnRUeXBlSWQgPSB0aGlzLmFsZXJ0VHlwZVZhbHVlTGlzdC5nZXRWYWx1ZShhcmdzLm5ld0luZGV4KTtcclxuICAgICAgICB0aGlzLnNlbGVjdGVkYWxlcnRUeXBlZGVzY3IgPSB0aGlzLmFsZXJ0VHlwZVZhbHVlTGlzdC5nZXRUZXh0KGFyZ3MubmV3SW5kZXgpOztcclxuICAgIH1cclxuICAgIHB1YmxpYyBjYXNoZmxvd2NvZGVzRERvbmNoYW5nZShhcmdzOiBTZWxlY3RlZEluZGV4Q2hhbmdlZEV2ZW50RGF0YSkge1xyXG5cclxuICAgICAgICB0aGlzLnNlbGVjdGVkY2FzaGZsb3djb2RlID0gdGhpcy5jYXNoZmxvd2NvZGVzVmFsdWVMaXN0LmdldFZhbHVlKGFyZ3MubmV3SW5kZXgpO1xyXG4gICAgICAgIHRoaXMuc2VsZWN0ZWRjYXNoZmxvd2NvZGVkZXNjciA9IHRoaXMuY2FzaGZsb3djb2Rlc1ZhbHVlTGlzdC5nZXRUZXh0KGFyZ3MubmV3SW5kZXgpOztcclxuICAgIH1cclxuICAgIHB1YmxpYyBiYWxhbmNlc2hlZXRjb2Rlc0REb25jaGFuZ2UoYXJnczogU2VsZWN0ZWRJbmRleENoYW5nZWRFdmVudERhdGEpIHtcclxuXHJcbiAgICAgICAgdGhpcy5zZWxlY3RlZGJhbGFuY2VzaGVldGNvZGUgPSB0aGlzLmJhbGFuY2VzaGVldGNvZGVzVmFsdWVMaXN0LmdldFZhbHVlKGFyZ3MubmV3SW5kZXgpO1xyXG4gICAgICAgIHRoaXMuc2VsZWN0ZWRiYWxhbmNlc2hlZXRjb2RlZGVzY3IgPSB0aGlzLmJhbGFuY2VzaGVldGNvZGVzVmFsdWVMaXN0LmdldFRleHQoYXJncy5uZXdJbmRleCk7O1xyXG4gICAgfVxyXG4gICAgcHVibGljIGZpbmFuY2lhbHBlcmZvcm1hbmNlY29kZXNERG9uY2hhbmdlKGFyZ3M6IFNlbGVjdGVkSW5kZXhDaGFuZ2VkRXZlbnREYXRhKSB7XHJcblxyXG4gICAgICAgIHRoaXMuc2VsZWN0ZWRmaW5hbmNpYWxwZXJmb3JtYW5jZWNvZGUgPSB0aGlzLmZpbmFuY2lhbHBlcmZvcm1hbmNlY29kZXNWYWx1ZUxpc3QuZ2V0VmFsdWUoYXJncy5uZXdJbmRleCk7XHJcbiAgICAgICAgdGhpcy5zZWxlY3RlZGZpbmFuY2lhbHBlcmZvcm1hbmNlY29kZWRlc2NyID0gdGhpcy5maW5hbmNpYWxwZXJmb3JtYW5jZWNvZGVzVmFsdWVMaXN0LmdldFRleHQoYXJncy5uZXdJbmRleCk7O1xyXG4gICAgfVxyXG4gICAgcHVibGljIGRkb3BlbigpIHtcclxuXHJcblxyXG4gICAgfVxyXG4gICAgcHVibGljIGdvdG9iYWNrKCkge1xyXG4gICAgICAgIHRoaXMucm91dGVyLm5hdmlnYXRlKFtcIi9maW5hZ2ctc2VhcmNoXCJdKTtcclxuICAgIH1cclxuICAgIHB1YmxpYyB2aWV3RGV0YWlsKHNlbGVjdGVkaXRlbTogYW55KSB7XHJcbiAgICAgICAgbGV0IG5hdmlnYXRpb25FeHRyYXM6IE5hdmlnYXRpb25FeHRyYXMgPSB7XHJcbiAgICAgICAgICAgIHF1ZXJ5UGFyYW1zOiB7XHJcbiAgICAgICAgICAgICAgICBcIm5hbWVcIjogc2VsZWN0ZWRpdGVtLm5hbWUsXHJcbiAgICAgICAgICAgICAgICBcInJlcXVpcmVkcGFyYW1cIjogc2VsZWN0ZWRpdGVtLnJlcXVpcmVkcGFyYW0sXHJcbiAgICAgICAgICAgICAgICBcImxvZ3RpbWVcIjogc2VsZWN0ZWRpdGVtLmxvZ3RpbWUsXHJcbiAgICAgICAgICAgICAgICBcInJlcXVlc3RpZFwiOiBzZWxlY3RlZGl0ZW0ucmVxdWVzdGlkXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMucm91dGVyLm5hdmlnYXRlKFtcImFnYXNhbGVydGh0bWwtdmlld1wiXSwgbmF2aWdhdGlvbkV4dHJhcyk7XHJcbiAgICB9XHJcbn0iXX0=